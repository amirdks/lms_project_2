function HaLunarDate(t,e,a,n,r,o){if((t instanceof String||"string"==typeof t)&&t.indexOf("/")>-1){for(var s,i,h,u=t.split(" "),l=0;l<u.length;l++)u[l].indexOf("/")>-1?s=u[l]:u[l].indexOf(":")>-1?i=u[l]:(u[l].toLowerCase().indexOf("am")>-1||u[l].toLowerCase().indexOf("pm")>-1)&&(h=u[l]);if(null!=s){var y=s.split("/");this.month=y[0],this.day=y[1],this.year=y[2]}if(null!=i){s.split(":");this.hour=values[0],this.minute=values[1],null!=h&&"pm"==h.toLowerCase()&&(this.hour+=12)}else this.hour=0,this.minute=0}else if(t instanceof HaLunarDate)this.year=t.getFullYear(),this.month=t.getMonth(),this.day=t.getDate(),this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds();else if(t instanceof Date){var l=this.convertFromGregorian(t);this.year=l.getFullYear(),this.month=l.getMonth(),this.day=l.getDate(),this.hour=l.getHours(),this.minute=l.getMinutes(),this.second=l.getSeconds()}else{if(null==t&&null==e&&null==a){var l=new Date,D=this.convertFromGregorian(l);this.year=D.getFullYear(),this.month=D.getMonth(),this.day=D.getDate()}else this.year=t,this.month=e,this.day=a;this.hour=n||0,this.minute=r||0,this.second=o||0}this.year=Number(this.year),this.month=Number(this.month),this.day=Number(this.day),this.hour=Number(this.hour),this.minute=Number(this.minute)}HaLunarDate.prototype.monthNames=["محرم","صفر","ربیع الاول","ربیع الثانی","جمادی الاول","جمادی الثانی","رجب","شعبان","رمضان","شوال","ذیقعده","ذیحجه"],HaLunarDate.prototype.dayNames=["السبت","الأحد","الاثنین","الثلاثاء","الأربعاء","الخمیس","الجمعة"],HaLunarDate.prototype.tableYearDays=[0,354,708,1063,1417,1771,2126,2480,2835,3189,3543,3898,4252,4606,4961,5315,5669,6024,6378,6733,7087,7441,7796,8150,8504,8859,9213,9568,9922,10276,10631],HaLunarDate.prototype.tableMonthDays=[0,30,59,89,118,148,177,207,236,266,295,325],HaLunarDate.prototype.getFullYear=function(){return this.year},HaLunarDate.prototype.getMonth=function(){return this.month},HaLunarDate.prototype.getDate=function(){return this.day},HaLunarDate.prototype.getHours=function(){return this.hour},HaLunarDate.prototype.getMinutes=function(){return this.minute},HaLunarDate.prototype.getSeconds=function(){return this.second},HaLunarDate.prototype.setHours=function(t){this.hour=t},HaLunarDate.prototype.setMinutes=function(t){this.minute=t},HaLunarDate.prototype.setSeconds=function(t){this.second=t},HaLunarDate.prototype.toString=function(){return this.dayNames[this.getDay()]+" "+this.getDate()+" "+this.monthNames[this.getMonth()]+" "+this.getFullYear()+" "+this.getHours()+":"+this.getMinutes()},HaLunarDate.prototype.getDayOfWeekName=function(t){return this.dayNames[t]},HaLunarDate.prototype.compare=function(t,e){return null==t?0:(null==e&&(e=t,t=this),t.getFullYear()>e.getFullYear()?-1:t.getFullYear()<e.getFullYear()?1:t.getMonth()>e.getMonth()?-1:t.getMonth()<e.getMonth()?1:t.getDate()>e.getDate()?-1:t.getDate()<e.getDate()?1:0)},HaLunarDate.prototype.getMonthName=function(t){return this.monthNames[t]},HaLunarDate.prototype.convertToGregorian=function(t){null==t&&(t=this);var e=Number(t.getFullYear()),a=Math.floor(e/30);a*=10631,a+=Number(this.tableYearDays[e%30]),a+=Number(this.tableMonthDays[t.getMonth()]),a+=Number(t.getDate()),a+=1948085;var n=2415021;a-=n;var r=new Date(0,0,1);return r.setDate(a),r},HaLunarDate.prototype.convertFromGregorian=function(t){var e=new Date(t),a=e.getHours(),n=e.getMinutes(),r=e.getSeconds();e.setHours(0);var o=864e5,s=Math.floor(e/o),i=2440590;s+=i,s-=1948085,days1=Math.floor(s/10631);var h,u=Math.floor(s%10631);for(h=0;h<this.tableYearDays.length;h++)if(this.tableYearDays[h]>u){h>0&&h--;break}h>29&&(h=29);var l,y=30*days1+h,D=u-this.tableYearDays[h];for(l=0;l<this.tableMonthDays.length;l++)if(this.tableMonthDays[l]>D){l>0&&l--;break}l>11&&(l=11);var g=l,p=D-this.tableMonthDays[l];0==p&&(0==g&&y--,g=0==g?11:g-1,p=this.getMonthTotalDays(g));var f=new HaLunarDate(y,g,p);return f.setHours(a),f.setMinutes(n),f.setSeconds(r),f},HaLunarDate.prototype.setDate=function(t){var e,a=new HaLunarDate(this.year,this.month,0).getDayOfYear()+t,n=a;for(e=0;e<this.tableMonthDays.length;e++)if(this.tableMonthDays[e]>n){e>0&&e--;break}e>11&&(e=11),this.month=e,this.day=n-this.tableMonthDays[e]},HaLunarDate.prototype.getDay=function(){return this.getWeekDay(this)},HaLunarDate.prototype.getWeekDay=function(t){null==t&&(t=this);var e=t.convertToGregorian(),a=e.getDay()+1;return 7==a&&(a=0),a},HaLunarDate.prototype.isLeapYear=function(t){return t=t||this.getFullYear(),t%30==2||t%30==5||t%30==7||t%30==10||t%30==13||t%30==16||t%30==18||t%30==18||t%30==21||t%30==24||t%30==26||t%30==29},HaLunarDate.prototype.getDayOfYear=function(t){return null==t&&(t=this),this.tableMonthDays[t.getMonth()]+t.getDate()},HaLunarDate.prototype.getYearTotalDays=function(t){return null==t&&(t=this.getFullYear()),this.isLeapYear(t)?366:365},HaLunarDate.prototype.getMonthTotalDays=function(t,e){return t<0?(e-=Math.floor(Math.abs(t/12))+1,t=11+t%12):t>11&&(e+=Math.floor(t/12),t%=12),11!=t?this.tableMonthDays[t+1]-this.tableMonthDays[t]:this.isLeapYear(e)?30:29},Date.isLeapYear=function(t){return 1==new Date(t,1,29).getMonth()};